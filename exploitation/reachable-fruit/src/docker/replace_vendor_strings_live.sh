#!/bin/bash
readonly LINKSYS_REPLACEMENT='Trellix'
readonly WUMC710_REPLACEMENT='HAX2023'
readonly VERSION_REPLACEMENT='1.3.37'

set -ex

# SECTION Linksys
# Modify filenames
mv WUMC710_web/linksys.css "WUMC710_web/${LINKSYS_REPLACEMENT}.css"
mv WUMC710_web/linksys_arabic.css "WUMC710_web/${LINKSYS_REPLACEMENT}_arabic.css"
# mv WUMC710_web/image/UI_Linksys.gif "WUMC710_web/image/UI_${LINKSYS_REPLACEMENT}.gif"
rm WUMC710_web/image/UI_Linksys.gif

# Modify file contents
grep -r 'linksys.css' WUMC710_web | cut -d ':' -f 1 | sort -u | while read -r path
do
    sed -i "s/linksys.css/${LINKSYS_REPLACEMENT}.css/g" "${path}"
done
grep -r 'linksys_arabic.css' WUMC710_web | cut -d ':' -f 1 | sort -u | while read -r path
do
    sed -i "s/linksys_arabic.css/${LINKSYS_REPLACEMENT}_arabic.css/g" "${path}"
done
# grep -r 'UI_Linksys.gif' WUMC710_web | cut -d ':' -f 1 | while read -r path
# do
#     sed -i "s/UI_Linksys.gif/UI_${LINKSYS_REPLACEMENT}.gif/" "${path}"
# done
grep -r 'background-image:url(image/UI_Linksys.gif);' | cut -d ':' -f 1 | while read -r path
do
    sed -i "s/background-image:url(image\/UI_Linksys.gif);//" "${path}"
done
grep -r '<!-- Copyright (c) 2013, Linksys LLC. All Rights Reserved. -->' WUMC710_web | cut -d ':' -f 1 | while read -r path
do
    sed -i 's/<!-- Copyright (c) 2013, Linksys LLC. All Rights Reserved. -->//' "${path}"
done
grep -r ' * Copyright (c) 2013, Linksys LLC. All Rights Reserved.' WUMC710_web | cut -d ':' -f 1 | while read -r path
do
    sed -i 's/ * Copyright (c) 2013, Linksys LLC. All Rights Reserved.//' "${path}"
done
sed -i "s/linksys/${LINKSYS_REPLACEMENT}/" WUMC710_web/station/wireless_basic.asp
# LINKSYS_REPLACEMENT_HEX="$(echo -n ${LINKSYS_REPLACEMENT} | xxd -g 16 -u | cut -d ' ' -f 2)"
LINKSYS_REPLACEMENT_HEX='5472656C6C6978'
sed -i "s/6C696E6B737973/${LINKSYS_REPLACEMENT_HEX}/" WUMC710_web/station/wireless_basic.asp
# !SECTION Linksys

# SECTION WUMC710
sed -i "s/WUMC710/${WUMC710_REPLACEMENT}/" /etc/version
sed -i "s/WUMC710/${WUMC710_REPLACEMENT}/" WUMC710_web/internal_version.html
# !SECTION WUMC710

# SECTION Version
sed -i "s/1.0.02/${VERSION_REPLACEMENT}/g" /etc/version
# !SECTION Version

! grep -ri linksys WUMC710_web
! grep -ri wumc710 WUMC710_web
! grep -ri 1.0.02 WUMC710_web

# # SECTION Interactions
sed -i 's/onChange="networkTypeChange/onChange="void/' WUMC710_web/station/site_survey.asp
sed -i 's/onchange="selectSecurityMode/onchange="void/' WUMC710_web/station/site_survey.asp WUMC710_web/station/wireless_basic.asp
sed -i 's/onchange="selectWEPKeyLength/onchange="void/' WUMC710_web/station/site_survey.asp
sed -i 's/onchange="selectWEPKeyLength_WET610N/onchange="void/' WUMC710_web/station/wireless_basic.asp
sed -i 's/onchange="changeLanguage/onchange="void/' WUMC710_web/network/sta_network.asp
sed -i 's/onChange="selectLANMode/onChange="void/' WUMC710_web/network/sta_network.asp
sed -i 's/onChange="selectIPv6Mode/onChange="void/' WUMC710_web/network/sta_network.asp

sed -i 's/updateSiteSurvey();//' WUMC710_web/station/site_survey.asp
# # !SECTION Interactions


